# スキルをパーソナライズしてみよう
## はじめに
”あんなスキルがあったらうれしい”、”こんなスキルが作れたら楽しそう” Voiceflowでは、思いついたらすぐにスキル開発を始めることができます。  
せっかく作るのであれば、使う人が喜んでくれたり使いやすいスキルを作りたいですよね。

ここでは、はやる気持ちを少しおさえて、”どんな人が使うのか”、”スキルを使ったらどううれしいのか”を考えて、使う人専用のスキルを作っていきたいと思います。

### 対象読者
- ちょっとだけVoiceflowをさわったことがある方
- VUIアシスタントとの会話が素っ気なく感じる方

### 制約
- voiceflowの操作方法やブロックの説明はしません。
- amazon alexaのスキルで説明をしますので、Googleアシスタントのスキルを作る方は適宜読み替えていただけたらと思います。

## パーソナライズ
### パーソナライズとは
使う人（ユーザー）に特化する。ということです。  

> パーソナライゼーション（英: personalization）は、パーソナライズ（personalize）という動詞の名詞形であり、「何かを個々人向けにカスタマイズすること」を意味する。  
> _「パーソナライゼーション」『フリー百科事典　ウィキペディア日本語版』より。　最終更新: 2017年7月7日 (金) 23:09 UTC　URL: https://ja.wikipedia.org/wiki/%E3%83%91%E3%83%BC%E3%82%BD%E3%83%8A%E3%83%A9%E3%82%A4%E3%82%BC%E3%83%BC%E3%82%B7%E3%83%A7%E3%83%B3_

業界によっては、もっと具体的な意味もあるようですが、今は「ユーザーに寄せていく」というざっくりとした意味で捉えてよいと思います。  

ユーザーに寄せていくためには、そのユーザーがどのような人なのか等を意識した作り込みをする必要があります。

## 専用スキルの開発
それでは、パーソナライズを考えながらスキル開発をしていきましょう。  

例えば「小学校の子どもが時間割を確認するスキル」を思いついたとします。  
”小学生”では抽象的なので、もっとユーザーに寄せていきます。
このユーザーを具体化していく手段として「ペルソナ」というツールを使います。

### ペルソナとは
サービスにとって最も典型的なユーザー像のことです。  

> ペルソナとは、企業が提供する製品・サービスにとって、最も重要で象徴的なユーザモデルのことで、ペルソナをベースにすることで、ユーザに強い影響を与えるツールのプラン・デザインが実現できる。  
> _「ペルソナデザイン」『フリー百科事典　ウィキペディア日本語版』より。　最終更新: 2019年9月27日 (金) 03:51 UTC　URL: https://ja.wikipedia.org/wiki/%E3%83%9A%E3%83%AB%E3%82%BD%E3%83%8A%E3%83%87%E3%82%B6%E3%82%A4%E3%83%B3_

ユーザー像を明確にして、ユーザーを満足させるべくサービスをフィットさせていきます。
あまり深く考える必要はありません。  
専門的なことを知らずにスキル開発できるのがVoiceflowの強みですので、「ある人専用のスキルを作るために、ある人がどんな人か特徴をあげる」という捉え方で良いです。

ペルソナを設定しておくメリットとして、次の３つがあります。
> * 担当者間で、共通した人物像を形成できる
> * ユーザー視点の精度を高めることができる
> * 時間、コストの削減ができる 
> _「今さら聞けない「ペルソナ」とは。意味やマーケティング上での活用方法について」ferretより。URL: https://ferret-plus.com/8116_

１つ目は、Voiceflowのコラボレーション機能を使う場合など、複数人で開発する場合に実感できると思います。  
２つ目は、まさにパーソナライズのことで、よりユーザーに寄り添える内容となることを考えやすくなるということです。  
３つ目は、作り始めるとアレもコレもと考え出し気が付くと脇道にそれていることがあるのですが、ペルソナを作っておけば、当初作ろうと考えていたものから大きくブレないので、結果的にコストが掛からないというものです。  

### ペルソナの設定
ペルソナの設定をしてみましょう。  
具体的なユーザーが決まっていれば、そのユーザーをイメージして整理します。  
何を整理すればよいのか疑問かと思いますが、まずは分かっていることを並べるだけでもよいと思います。

ここでは、同じテーマのスキルであっても、ペルソナを設定することで求められるものに違いが出ることが分かるように、我が子二人のペルソナを書いてみます。

||長女|次女|
|:---|:---|:---|
|名前|ありす|すず|
|性別|女|女|
|年齢|９歳（もうすぐ○○小学校四年生）|６歳（もうすぐ○○小学校一年生）|
|習い事|月・水・金１９：００からダンス|火・木１６：００からピアノ|
|生活|学校に行くのが毎日楽しくてたまらない。給食のシチューが苦手|ピアノで曲が弾けはじめ楽しい。夜８時には寝る|

これをベースにどんな時間割スキルがよいかを考えていくと
- 長女は、もうすぐ小学四年生であることから、自分で翌日の準備ができることが想像できるので「準備ができた後に、確認をしてあげる」
- 次女は、まだ小学一年生であることから、一人で翌日の準備をすることが難しいので「一緒に準備を進めてあげる」

が喜ばれそうです。

たったこれだけを整理するだけで、同じ小学生を対象にしたスキルであっても、求められるものに違いがあることがわかります。

### UIの確認
VoiceUIだからといって入力も出力も音声にする必要はありません。  
既存のUIと組み合わせることも可能なので、ユーザーの体験向上に一番効果の高いものを選択しましょう。  
ユーザーの利用シーンをイメージして、ざっくり下記の表のタイプから作ろうとしているスキルのタイプを考えておくとよいです。

|タイプ|INPUT|OUTPUT|
|:---:|:---:|:---:|
|A|音声|音声|
|B|音声|デバイス|
|C|デバイス|音声|

例題のスキルを使う子供たちの利用シーンは下記ですので、入出力ともに音声のタイプAが適していると考えます。
- 学校から配布された時間割を見るため視線を使わないことが望ましい
- 教科書を持ったりランドセルの中をあさるため両手が使えない

### 会話フローと内容
ペルソナを設定したことで、長女と次女で会話や内容を変える必要があることが分かるかと思います。  
それぞれのペルソナを元に、会話フローと内容を考えます。

#### 長女の場合
長女は、自分で翌日の準備ができるので、準備したものを長女に発話させ、alexaがOK/NGを判定するようにしました。  
自分で回答をするためには、自分で翌日の時間割が頭に入っていないといけません。  
クイズ形式で、alexaに合否を判定してもらうこと正解が楽しくなっていくことを狙います。

|長女||スキル|補足|
|:---|:---:|:---|:---|
|アレクサ、「ありすの時間割」を開いて|→|||
||←|こんにちは、ありす。これから一緒に時間割を確認しましょう。||
||←|一時間目の授業を教えてください。|時間割の教科名を問う|
|国語です。|→||教科名を答える|
||←|正解||
||←|二時間目の授業を教えてください。||
|算数です。|→|||
||←|正解||
|...||...||
||←|よくできました。明日も頑張りましょう。||

#### 次女の場合
次女は、自分で準備ができるようになってほしいので、alexaが確認し、次女ができた/できないを答えるようにしました。  
こちらも、自分で準備することが楽しくなっていくことを狙います。

|次女||スキル|補足|
|:---|:---:|:---|:---|
|アレクサ、「すずの時間割」を開いて|→|||
||←|こんにちは、すず。これから一緒に時間割を確認しましょう。||
||←|一時間目の授業は国語です。準備はできましたか？|教科の準備ができたかを問う|
|できました。|→||準備ができた／できないを答える|
||←|正解||
||←|二時間目の授業は算数です。準備はできましたか？||
|できました。|→|||
||←|正解||
|...||...||
||←|よくできました。明日も頑張りましょう。||

### スキル作成
どのようなユーザーなのかを意識することにより、それぞれの状況や抱えている課題を考慮した会話の内容となります。  
長女と次女では会話のフローは同じですが、内容がそれぞれに特化した内容になっています。つまりパーソナライズに向かっているということです。  
この会話フローがスキルの設計書になります。この設計書に沿ってVoiceflowでスキルを作ってみましょう。
「Speak」ブロックと「Choice」ブロックのみで作れます。

例題では、次女の会話フローからスキルを作ります。

|次女||スキル|ブロック|補足|
|:---|:---:|:---|:--:|:---|
|アレクサ、「すずの時間割」を開いて|→||-||
||←|こんにちは、すず。これから一緒に時間割を確認しましょう。|speak||
||←|一時間目の授業は国語です。準備はできましたか？|speak|教科の準備ができたかを問う|
|できました。|→||choice|準備ができた／できないを答える|
||←|正解|speak||
||←|二時間目の授業は算数です。準備はできましたか？|speak||
|できました。|→||choice||
||←|正解|speak||
|...||...|||
||←|よくできました。明日も頑張りましょう。|speak||

![次女の会話フローからのスキル](images/chapxx-magistralla/base.png)

## よりエンゲージメントをあげるために
たったこれだけでも、既にその子専用のスキルになっていますが、もっとエンゲージメントをあげてみましょう。  

### シノニム
同義語を登録します。  
通常の会話では「YES」と「はい」などを同義語として無意識に扱っていると思います。しかし、作ったスキルは、ユーザーが発した言葉が期待したものと同義かどうかを自動判別してくれません。
スキルを使う中で、同義のものを異なるものと判断されると、改めて言い直すなどストレスを感じてしまいます。  
そこで、ユーザーが言いそうな同義語（言い間違えも含めて）を登録し、スムーズな会話となるようにします。

例題では、準備ができたかを回答している「できました」に同義語を登録していきます。

|次女||スキル|ブロック|補足|
|:---|:---:|:---|:--:|:---|
|アレクサ、「すずの時間割」を開いて|→||-||
||←|こんにちは、すず。これから一緒に時間割を確認しましょう。|speak||
||←|一時間目の授業は国語です。準備はできましたか？|speak||
|できました。|→||choice|「できた」「はい」「うん」を同義語と扱う|
||←|正解|speak||
||←|二時間目の授業は算数です。準備はできましたか？|speak||
|できました。|→||choice||
||←|正解|speak||
|...||...|||
||←|よくできました。明日も頑張りましょう。|speak||

![シノニム](images/chapxx-magistralla/slot1.png)
![シノニム](images/chapxx-magistralla/slot2.png)

### 日時の情報
スキルが使われる日付から曜日を求めたり、時間を求めることができます。  
上記ができると、次のような使い方もできるようになり、ユーザーの予定に合わせた会話が可能になります。
- 曜日や時間帯毎にメッセージを変える
- 誕生日など特別な日にメッセージを変える

例題では、習いごとの前日は、ピアノを応援するメッセージを追加で言うようにします。  
「code」ブロックと「if」ブロックを使います。  
「code」ブロックの使い方は、Voiceflow公式のフォーラムに丁寧に乗っていますので参考にしてください。  
https://forum.voiceflow.com/t/getting-the-users-time-zone-in-your-skill/314

|次女||スキル|ブロック|補足|
|:---|:---:|:---|:--:|:---|
|アレクサ、「すずの時間割」を開いて|→||-||
||||code|タイムゾーン、日時、曜日取得|
||←|こんにちは、すず。これから一緒に時間割を確認しましょう。|speak||
||←|一時間目の授業は国語です。準備はできましたか？|speak||
|できました。|→||choice||
||←|正解|speak||
||←|二時間目の授業は算数です。準備はできましたか？|speak||
|できました。|→||choice||
||←|正解|speak||
|...||...|||
||||if|曜日判定|
||←|明日はピアノがありますね。|speak|ピアノ応援メッセージ|
||←|よくできました。明日も頑張りましょう。|speak||

![曜日](images/chapxx-magistralla/weekday1.png)
![曜日](images/chapxx-magistralla/weekday2.png)

### SSML
ベンダー毎にサポートされているタグが異なったり、独自のタグがある
- alexa
- google

#### サウンドライブラリ
クイズ番組の”正解／不正解の音”のように、効果的に音を鳴らすことでユーザーの体験を向上させることができます。いわゆる効果音というものです。  
Voiceflowでは、2つの方法で効果音を鳴らすことができます。  
ひとつは、自身で音声ファイルをアップロードし鳴らす方法、もうひとつは、ベンダーが用意している音声ファイルを鳴らす方法です。  
ベンダーが用意している音声ファイルとは、それぞれのベンダーがサウンドライブラリとしてスキル用に公開しているもので自由に使うことができます。

例題では、ベンダーが用意している音声ファイルを使って効果音を鳴らします。

|次女||スキル|ブロック|補足|
|:---|:---:|:---|:--:|:---|
|アレクサ、「すずの時間割」を開いて|→||-||
||||code||
||←|こんにちは、すず。これから一緒に時間割を確認しましょう。|speak||
||←|一時間目の授業は国語です。準備はできましたか？|speak||
|できました。|→||choice||
||←|（ピンポン）|speak|サウンドライブラリ正解音|
||←|二時間目の授業は算数です。準備はできましたか？|speak||
|できました。|→||choice||
||←|（ピンポン）|speak|サウンドライブラリ正解音|
|...||...|||
||||if||
||←|明日はピアノがありますね。|speak||
||←|よくできました。明日も頑張りましょう。|speak||

![サウンド](images/chapxx-magistralla/soundlib1.png)
![サウンド](images/chapxx-magistralla/soundlib2.png)

##### Alexa Skills Kitサウンドライブラリ
https://developer.amazon.com/ja-JP/docs/alexa/custom-skills/ask-soundlibrary.html

![Alexa Skills Kitサウンドライブラリ](images/chapxx-magistralla/soundlib-a.png)
##### Google Assistant Sound Library
https://developers.google.com/assistant/tools/sound-library
![Google Assistant Sound Library](images/chapxx-magistralla/soundlib-g.png)


#### Speechcons

例題では、最初のあいさつ「こんにちは」をSpeechconを使って発話させます。

|次女||スキル|ブロック|補足|
|:---|:---:|:---|:--:|:---|
|アレクサ、「すずの時間割」を開いて|→||-||
||||code||
||←|こんにちは|speak|speechcon|
||←|すず。これから一緒に時間割を確認しましょう。|speak||
||←|一時間目の授業は国語です。準備はできましたか？|speak||
|できました。|→||choice||
||←|（ピンポン）|speak||
||←|二時間目の授業は算数です。準備はできましたか？|speak||
|できました。|→||choice||
||←|（ピンポン）|speak||
|...||...|||
||||if||
||←|明日はピアノがありますね。|speak||
||←|よくできました。明日も頑張りましょう。|speak||

## おわりに
他にもVoiceflowの機能を使うことで更にパーソナライズを進めることが可能です。
・Googleスプレッドシートから時間割情報を取得する
・時間割が完了したら親にメールやSMS等で通知する
・
本格的にパーソナライズする場合、もっと様々なことを考える必要があります。
Blocksメニューのuserカテゴリ「user info」を使うと更に幅広い情報が使えるようになります。
